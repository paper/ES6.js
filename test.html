<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>test es6.js</title>
<script src="es6.js"></script>
</head>
<body>
<p>1</p>
<p>2</p>
<p>3</p>

<script>

  //测试templateString
  ;(function(){
    var name = "Bob", time = "today";
    var r = ES6.templateString({
      name : name,
      time : time
    },'Hello ${name}, how are you ${time}?');
    //console.log(r);
  })()
  
  ;(function(){
    /* */
    //运算不支持 字符串拼接 
    var x = 1, xy = 2, y = 3, yx = 4;
    var r = ES6.templateString({
      x : x,
      y : y,
      xy : xy,
      yx : yx
    },'${ x } + ${ y } + ${ xy } + ${ yx } = ${ x + y + xy + yx }');
    /* */
    //console.log(r);
  })()
  
  //测试 数组的扩展  
  ;(function(){
        
    var ps = document.querySelectorAll('p');

    Array.from(ps).forEach(function (p) {
      //console.log(p);
    });
    
    Array.from(ps, function(v){
      v.innerHTML += "a"
    });
    
    
    //console.log( Array.of(3, 1, 8) ); // [3,11,8]
    //console.log( Array.of(3).length ); // 1
    
    var x = [1, 5, 10, 15].find(function(value, index, arr) {
        return value > 9;
    });
    
    //console.log(x); //10
    
    var y = [1, 5, 10, 15].findIndex(function(value, index, arr) {
        return value > 9;
    });
    
    //console.log(y); //2
    
    
    
  })()
  
  //测试 对象的扩展
  ;(function(){
    //console.log( Object.is(NaN, NaN) )  // true
    //console.log( Object.is(-0, +0) )    // false    
    
    var target = { a: 1, b: 1 };
    var source1 = { b: 2, c: 2 };
    var source2 = { c: 3 };

    Object.assign(target, source1, source2);
    //target // {a:1, b:2, c:3}
    
    //console.log( ES6.Symbol() + "_test" );
    //console.log( ES6.Symbol("Test").name );
  })()
  
  //test ES6.arrow
  ;(function(){
    
    var f = ES6.arrow('v => v');
    //console.log( f(3) );
    
    var g = ES6.arrow('y => y*2');
    //console.log( g(5) );
    //console.log( f(11) );
    
    var sum1 = ES6.arrow('(num1, num2) => num1 + num2');
    //console.log( sum1(100,2) )
    
    //var x = () => 5;
    var x = ES6.arrow('() => 5');
    //console.log( x() )

    //var getTempItem = id => ({ id: id, name: "Temp" });
    var getTempItem = ES6.arrow('id => ({ id: id, name: "Temp" })');
    //console.log( getTempItem(3) )
    
    // 正常函数写法
    //[1,2,3].map(function (x) {
    //  return x * x;
    //});

    // 箭头函数写法
    //console.log( [1,2,3].map( ES6.arrow('x => x * x') ) );

    //var sum = (num1, num2) => { return num1 + num2; }
    var sum2 = ES6.arrow('(num1, num2) => { return num1 + num2; }')
    //console.log( sum2(200, 300) );
    
    
    var result = [3,4,1,10,6].sort(ES6.arrow('(a, b) => a - b'));
    //console.log( result )
    
  })();
  
  
  //测试 Set和Map数据结构  
  ;(function(){

    //Map
    var m = new ES6.Map();
  
    var o = { a: 1 };
    var r = [1,2];  
    var f = function(){ console.log("fun") };
    
    var n = null;
    var u = undefined;
    var i = 262;
    var s = "edition";
    var b = true;
    
    m.set(o, "I am object")             // 键是 object
    m.set(r, "I am array")              // 键是 array
    m.set(f, "I am function")           // 键是 function
    
    m.set(n, "I am null")               // 键是 null
    m.set(s, "I am string")             // 键是 字符串
    m.set(i, "I am number")             // 键是 数值
    m.set(u, "I am undefined")          // 键是 undefined
    m.set(b, "I am boolean")            // 键是 boolean

    //console.log( "m.keys() = ", m.keys() )
    //console.log( "m.values() = ", m.values() )
    //console.log( "m.entries() = ", m.entries() )
    
    //console.log("============= change =============");
    o.b = 2;
    r.push(3);
    
    //值不变
    //console.log( "m.entries() = ", m.entries() )
    
    //console.log("============= forEach begin =============");
    m.forEach(function(value, key, map){
      //console.log(value);
      //console.log(key);
      //console.log(map);
    })
    //console.log("============= forEach end =============");
  })()
  
  
  
  
  
  
  
  
</script>
</body>
</html>